# This file is used to generate config.getic, which is used to control
# the logic that pulls input data from HPSS.

config_getic:
  filename: config.getic
  content: !expand |
    #!/bin/ksh -x
    
    # This file is automatically generated from the YAML-based system
    # in ecf/ecfutils/.  Any changes will be overwritten if
    # setup_case.sh is rerun.
    
    ########## config.getic ##########
    # Fetching GFS initial conditions specific
    
    echo "BEGIN: config.getic"
    
    # Get task specific resources
    . $EXPDIR/config.resources getic
    
    # We should just be supporting the OPSGFS only
    export ics_from="{doc.settings.ics_from}" # initial conditions from opsgfs or pargfs
    
    # Provide a parallel experiment name and path to HPSS archive
    if [ $ics_from = "pargfs" ]; then
        export parexp="{doc.settings.parexp}"
        export HPSS_PAR_PATH="{doc.places.HPSS_PAR_PATH}"
    fi
    
    echo "END: config.getic"
    
