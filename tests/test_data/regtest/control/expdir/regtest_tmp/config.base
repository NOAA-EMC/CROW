#!/bin/ksh -x

# This file is automatically generated from the YAML-based system
# in ecf/ecfutils/.  Any changes will be overwritten if
# setup_case.sh is rerun.

########## config.base ##########
# Common to all steps

echo "BEGIN: config.base"

# Machine environment
export machine="sandbox"

# EMC parallel or NCO production
export RUN_ENVIR="emc"

# Account, queue, etc.
export ACCOUNT="none"     # This comes from user.yaml
export QUEUE="dev"
export QUEUE_ARCH="dev"
    
# Project to use in mass store:
HPSS_PROJECT=none

# Directories relative to installation areas:
export HOMEgfs="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW"
export PARMgfs=$HOMEgfs/parm
export FIXgfs=$HOMEgfs/fix
export USHgfs=$HOMEgfs/ush
export UTILgfs=$HOMEgfs/util
export EXECgfs=$HOMEgfs/exec
export SCRgfs=$HOMEgfs/scripts

########################################################################

# GLOBAL static environment parameters
export NWPROD="/gpfs/hps/nco/ops/nwprod"
export DMPDIR="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache"
export RTMFIX="$CRTM_FIX"

export HOMEDIR="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/save/jiankuang"
export STMP="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/$USER"
export PTMP="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/$USER"
export NOSCRUB="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/noscrub/jiankuang"

# Base directories for various builds
export BASE_GIT="/gpfs/hps3/emc/global/noscrub/emc.glopara/git"
export BASE_SVN="/gpfs/hps3/emc/global/noscrub/emc.glopara/svn"

# Utilities needed in the scripts (mostly post)
sandbox

# Toggle to turn on/off GFS downstream processing.
export DO_BUFRSND="YES" # Run GFS_POSTSND
export DO_GEMPAK="YES"  # Run GFS GEMPAK
export DO_AWIPS="NO"   # Run GFS AWIPS

export REALTIME="NO"

####################################################
# DO NOT ADD MACHINE DEPENDENT STUFF BELOW THIS LINE
# IF YOU HAVE TO MAKE MACHINE SPECIFIC CHANGES BELOW
# FEEL FREE TO MOVE THEM ABOVE THIS LINE TO KEEP IT
# CLEAR
####################################################
# Build paths relative to $HOMEgfs
export HOMEgsi="$HOMEgfs"
export FIXgsi="$HOMEgfs/fix/fix_gsi"
export HOMEfv3gfs="$HOMEgfs/sorc/fv3gfs.fd"
export HOMEpost="$HOMEgfs"
export HOMEobsproc_prep="/gpfs/hps3/emc/global/noscrub/emc.glopara/git/obsproc/obsproc_prep_RB-5.2.0"
export HOMEobsproc_network="/gpfs/hps3/emc/global/noscrub/emc.glopara/git/obsproc/obsproc_global_RB-3.2.0"
export BASE_VERIF="$BASE_SVN/verif/global/tags/vsdb"

# CONVENIENT utility scripts and other environment parameters
export NCP="/bin/cp -p"
export NMV="/bin/mv"
export NLN="/bin/ln -sf"
export VERBOSE="YES"
export KEEPDATA="NO"
export CHGRP_CMD="chgrp rstprod"
export NEMSIOGET="$HOMEgfs/exec/nemsio_get"

# Machine environment, jobs, and other utility scripts
export BASE_ENV="$HOMEgfs/env"
export BASE_JOB="$HOMEgfs/jobs/rocoto"

# EXPERIMENT specific environment parameters
export SDATE=2016021000
export EDATE=2016021200
export PSLOT="regtest_tmp"
export EXPDIR="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/expdir/regtest_tmp"
export ROTDIR="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/comrot/regtest_tmp"
export ROTDIR_DUMP="NO"
export DUMP_SUFFIX="p"
export RUNDIR="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/RUNDIRS/regtest_tmp"
export ARCDIR="$NOSCRUB/archive/$PSLOT"
export ICSDIR="/Users/jiankuang/Documents/Eclipse_workspace/global-workflow/workflow/CROW/tests/test_data/regtest/cache/comrot/regtest_tmp/FV3ICS"

# Commonly defined parameters in JJOBS
export envir=${envir:-"prod"}
export NET="gfs"
export RUN=${RUN:-${CDUMP:-"gfs"}}
export jlogfile="${ROTDIR}/logs/jlogfile"
#export ERRSCRIPT=${ERRSCRIPT:-'eval [[ $err = 0 ]]'}
#export LOGSCRIPT=${LOGSCRIPT:-""}
export ERRSCRIPT=${ERRSCRIPT:-"err_chk"}
export LOGSCRIPT=${LOGSCRIPT:-"startmsg"}
export REDOUT="1>"
export REDERR="2>"

export SENDECF="NO"
export SENDCOM="NO"
export SENDDBN="NO"
export SENDSDM="NO"

# Adjusting COM paths for non-prod experiments
#export PDY=`expr $CDATE | cut -c1-8`
#export GDATE=`$NDATE -06 $CDATE`
#export PDY_m6hrs=`expr $GDATE | cut -c1-8`
#export COMINgfs="$COMROOThps/$NET/$envir/$RUN.$PDY"
#export COMINgfs_m6hrs="$COMROOThps/$NET/$envir/$RUN.$PDY_m6hrs"
#export COMIN="$ROTDIR/$CDUMP.$PDY/$cyc"
#export COMOUT="$ROTDIR/$CDUMP.$PDY/$cyc"
#export COMOUTwmo="$ROTDIR/$CDUMP.$PDY/$cyc/wmo"

# Resolution specific parameters
export CASE="C192"

# Output frequency of the forecast model (for cycling)
export FHMIN=12

# GFS cycle info
export gfs_cyc=4 # 0: no GFS cycle, 1: 00Z only, 2: 00Z and 12Z only, 4: all 4 cycles.
    
echo "END: config.base"
