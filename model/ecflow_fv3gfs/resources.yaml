resource_demo: &resource_demo

  run_test:
    resources: !JobRequest
      - exe: nothing
        mpi_ranks: 1

  # From if[[...ecen]] block in config.resources:
  run_ecen:
    - env: { } #*mpi_tuning
      memory: "3072M" 
      walltime: 00:02:00
      mpi_ranks: 84
      resources: !JobRequest
        - exe: placeholder
          # max_ppn comes from THEIA.env: 84/12 = 7
          max_ppn: 7
          OMP_NUM_THREADS: 2

  run_chgres:
    env: { }
    resources:  !JobRequest
      - exe: time
        OMP_NUM_THREADS: 12
        args:
          - placeholder

  run_nothing: # Special placeholder for "do nothing"
    env: { }
    memory: "300M"
    resources:  !JobRequest
      - exe: nothing

  run_eobs:
    env: { }
    memory: "3072M" 
    walltime: 00:02:00
    mpi_ranks: !calc 12*6
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 6
        OMP_NUM_THREADS: 4

  run_eomg:
    env: { }
    memory: "3072M"
    walltime: 00:02:00
    mpi_ranks: !calc 6*12
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 6
        OMP_NUM_THREADS: 2

  run_eupd:
    env: { }
    memory: "3072M" 
    walltime: 00:02:00
    mpi_ranks: !calc 10*12
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 12
        OMP_NUM_THREADS: 2

#  run_enkf:
#    env: { }
#    mpi_ranks: !calc 10*12
#    resources:  !JobRequest
#      - exe: placeholder
#        max_ppn: 12
#        OMP_NUM_THREADS: 4

  run_efcs:
    env: { }
    walltime: 00:02:00
    mpi_ranks: 120
    memory: "3072M"

  run_epos:
    env: { }
    memory: "254M"
    mpi_ranks: 84
    walltime: 00:02:00
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 12
        OMP_NUM_THREADS: 2

  run_prep:
    env: { }
    memory: "3072M"
    walltime: 00:02:00
    mpi_ranks: 12
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 12
        OMP_NUM_THREADS: max

  run_anal:
    env: { }
    memory: "3072M" 
    mpi_ranks: 144
    walltime: 00:02:00
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 6
        OMP_NUM_THREADS: 2

#  run_gsi:
#    env: { }
#    mpi_ranks: !calc 24*6
#    resources:  !JobRequest
#      - exe: placeholder
#        max_ppn: 6
#        OMP_NUM_THREADS: 4

  run_gdasfcst:
    env: { }
    mpi_ranks: 144
    walltime: 00:02:00
    memory: "3072M"

  run_gfsfcst:
    env: { }
    mpi_ranks: 144
    walltime: 00:02:00
    memory: "3072M" 

  run_gdaspost:
    env: { }
    memory: "3072M"
    mpi_ranks: 72
    walltime: 00:02:00
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 12
        OMP_NUM_THREADS: 1

  run_gfspost:
    env: { }
    memory: "3072M"
    mpi_ranks: 72
    walltime: 00:02:00
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 12
        OMP_NUM_THREADS: 1

  run_vrfy:
    env: { }
    memory: "3072M" 
    mpi_ranks: 1
    walltime: 00:02:00
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 1
        OMP_NUM_THREADS: 2

  run_arch:
    env: { }
    memory: "3072M"
    mpi_ranks: 1
    walltime: 00:02:00
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 1
        OMP_NUM_THREADS: 2

  run_final:
    env: { }
    memory: "2M"
    mpi_ranks: 1
    walltime: 00:01:00
    resources:  !JobRequest
      - exe: placeholder
        max_ppn: 1
        OMP_NUM_THREADS: 2

#  run_earc:
#    env: { }
#    memory: "3072M"
#    mpi_ranks: 1
#    walltime: 00:15:00
#    resources:  !JobRequest
#      - exe: placeholder
#        max_ppn: 1
#        OMP_NUM_THREADS: 2

  run_fv3ic:
    env: { }
    memory: "3072M" 
    mpi_ranks: 24
    resources:  !JobRequest
      - exe: placeholder
