
eobs: &eobs_action !Action
  <<: *action_base
  J_JOB: eobs
  CASE: !calc doc.fv3_enkf_settings.CASE
  walltime: !timedelta 00:15:00
  resources: !calc run_eobs.resources
  gsi_resources: !calc run_gsi.resources
  memory: "3072M"
  ANALYSISSH: "{doc.places.BASE_GSI}/scripts/exglobal_analysis_fv3gfs.sh.ecf"
  APRUN_GSI:  !calc tools.command_without_exe(par,gsi_resources,'placeholder')

  Inherit: !Inherit
    - [ doc.gfs_output_settings, "^FH.*|OUTPUT_GRID" ]
    - [ doc.fv3_enkf_settings, "FHCYC" ]
    - [ doc.data_assimilation, ".*" ]
    - [ doc.fv3_settings, "LEVS|QUILTING|WRITE_NEMSIOFILE|nst_anl" ]
    - [ doc.case, "EDATE|SDATE|gfs_cyc" ]

  NMEM_EOMGGRP: !calc doc.data_assimilation.NMEM_ENKF_GRP_EOMN
  NTHREADS_GSI: !calc nodes.omp_threads_for(gsi_resources[0])
  NTHSTACK: 1024000000

# GSI namelist options related to observer for EnKF
  VERBOSE: YES
  WRITE_NEMSIOFILE: YES
