
vrfy: &vrfy_action !Action
  <<: *action_base
  Template: !Template
    <<: [ *CYC_TRACK_VARS, *CYC_GEN_VARS, *MIN_VARS, *RAD_VARS, *OZN_VARS, *MIN_RAD_OZN_VARS, *VRFY_CDUMP_GFS_VARS, *vrfy_template ]
  J_JOB: vrfy
  walltime: !timedelta 01:00:00
  resources: !calc run_vrfy.resources
  memory: "3072M"

  Inherit: !Inherit
    - [ doc.gfs_output_settings, "^FH.*|OUTPUT_GRID" ]
    - [ doc.fv3_gfs_settings, ".*" ]
    - [ doc.data_assimilation, ".*" ]
    - [ doc.platform.general_env, ".*" ]
    - [ doc.platform.mpi_tuning, ".*" ]
    - [ doc.fv3_settings, "LEVS|QUILTING|WRITE_NEMSIOFILE|nst_anl" ]
    - [ doc.case, "EDATE|SDATE|REALTIME|gfs_cyc|DO_RELOCATE|DO_MAKEPREPBUFR" ]
    - [ doc.places, "ARCDIR|ATARDIR|BASE_GSI|BASE_NEMSfv3gfs|BASE_ENV|BASE_JOB|BASE_POST|BASE_PREP|BASE_PREP_GLOBAL|BASE_SVN|BASE_VERIF|FORECASTSH|FCSTEXECDIR|GFSDOWNSH|GFSDWNSH|HOMEDIR|MYBASE_SVN|NC2NEMSIOSH|NOSCRUB|REGRID_NEMSIO_SH|REGRID_NEMSIO_TBL|POSTGPSH|POSTGPEXEC|POSTJJOBSH|PTMP|ROTDIR|RUNDIR|STMP|REMAPSH|NC2NEMSIOSH" ]

  CASE_ENKF: "C96"
  CDFNL: "gdas"
  CDUMPFCST: "gdas"  # Fit-to-obs with GDAS/GFS prepbufr
  GRIB1_WORKS: NO
  NCO_NAMING_CONV: !calc doc.platform.NCO_NAMING_CONV
  SMOOTH_ENKF: YES
  BACKDATEVSDB: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: 24
    - otherwise:
      do: NULL
  VBACKUP_PRCP: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: 24
    - otherwise:
      do: NULL
  VSDBSH: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: !calc doc.places.VSDBSH
    - otherwise:
      do: NULL
  ftyplist: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: "pgbq"
    - otherwise:
      do: NULL
  vhr_rain: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: 240
    - otherwise:
      do: NULL
  vlength: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: 240
    - otherwise:
      do: NULL
  vsdbhome: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: !calc doc.places.vsdbhome
    - otherwise:
      do: NULL
  vsdbsave: !FirstTrue
    - when: !calc CDUMP=="gfs"
      do: !calc doc.places.vsdbsave
    - otherwise:
      do: NULL
  VDUMP: "gfs"
  VRFYG2OBS: NO
  VRFYGENESIS: NO
  VRFYGMPK: NO
  VRFYMINMON: NO
  VRFYOZN: NO
  VRFYPRCP: YES
  VRFYRAD: NO
  VRFYTRAK: NO
  VSDB_STEP1: YES
  VSDB_STEP2: NO
  VRFYGENESIS: YES     # Cyclone genesis
  VRFYGMPK: NO         # Gempak verification
  WRITE_NEMSIOFILE: YES
  assim_freq: 6
  memory_vrfy: "16384M"
  nst_anl: YES
