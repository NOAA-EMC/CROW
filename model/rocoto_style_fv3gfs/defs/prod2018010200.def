extern /prod2018010118/gdas/post
extern /prod2018010118/gdas/enkf/epos
suite prod2018010200
  #repeat day 1
  edit ECF_TRIES '1'
  #edit ECF_JOB_CMD 'lsub %ECF_JOB% %ECF_JOBOUT% xc40-dev'
  edit ECF_JOB_CMD 'lsub %ECF_JOB% %ECF_JOBOUT% %MACHINE%'
  edit ECF_KILL_CMD 'lkill %ECF_NAME% %ECF_JOBOUT%'
  edit ECF_HOME '/gpfs/hps3/emc/nems/noscrub/Samuel.Trahan/blah/model/rocoto_style_fv3gfs'
  #edit ECF_HOME '/gpfs/hps3/emc/global/noscrub/emc.glopara/ecflow/fv3'
  edit CYC '00'
  edit ENVIR 'prod'
  edit E 'jecffv3'
  #edit QUEUE 'dev'
  edit PROJENVIR 'GFS-T2O'
  edit EMCPEN 'ecfgfsfv3'
  edit DATAROOT '/gpfs/hps2/stmp/emc.glopara/ecfgfsfv3'
  edit ECF_FILES '/gpfs/hps3/emc/nems/noscrub/Samuel.Trahan/blah/model/rocoto_style_fv3gfs/scripts'
  edit ECF_OUT '/gpfs/hps3/emc/nems/noscrub/Samuel.Trahan/blah/model/rocoto_style_fv3gfs/output'
  edit ECF_LOG '/gpfs/hps3/emc/nems/noscrub/Samuel.Trahan/blah/model/rocoto_style_fv3gfs/ecf.log'
  edit MODEL_NAME 'gfs'
  
  edit DUMPDIR '/gpfs/tp1/emc/globaldump'
  edit QUEUE 'debug'
  edit COM '/gpfs/hps2/ptmp/emc.glopara/ecfgfsfv3/com'
  edit QUEUESERV 'dev_transfer'
  
  family gdas # /prod2018010200/gdas
    edit ECF_JOB_CMD 'lsub %ECF_JOB% %ECF_JOBOUT% %MACHINE%'
    edit ECF_FILES '{doc.settings.ECF_HOME}/scripts'
    edit PROJ '%PROJENVIR%'
    edit MODEL_NAME 'gdas'
    task dump_waiter
      event 1 updated_status
    task prep
      trigger /prod2018010118/gdas/post == complete and ./dump_waiter:updated_status
    family enkf # /prod2018010200/gdas/enkf
      task eobs
        trigger ../prep == complete and /prod2018010118/gdas/enkf/epos == complete
      family eomg # /prod2018010200/gdas/enkf/eomg
        trigger ./eobs == complete
        task grp1
          edit ENSGRP '1'
        task grp2
          edit ENSGRP '2'
        task grp3
          edit ENSGRP '3'
        task grp4
          edit ENSGRP '4'
        task grp5
          edit ENSGRP '5'
        task grp6
          edit ENSGRP '6'
        task grp7
          edit ENSGRP '7'
        task grp8
          edit ENSGRP '8'
        task grp9
          edit ENSGRP '9'
        task grp10
          edit ENSGRP '10'
        task grp11
          edit ENSGRP '11'
        task grp12
          edit ENSGRP '12'
        task grp13
          edit ENSGRP '13'
        task grp14
          edit ENSGRP '14'
        task grp15
          edit ENSGRP '15'
        task grp16
          edit ENSGRP '16'
      endfamily # /prod2018010200/gdas/enkf/eomg
      task eupd
        trigger ./eomg == complete
      task ecen
        trigger ./eupd == complete and ../anal == complete
      family efcs # /prod2018010200/gdas/enkf/efcs
        trigger ./eobs == complete
        task grp1
          edit ENSGRP '1'
        task grp2
          edit ENSGRP '2'
        task grp3
          edit ENSGRP '3'
        task grp4
          edit ENSGRP '4'
        task grp5
          edit ENSGRP '5'
        task grp6
          edit ENSGRP '6'
        task grp7
          edit ENSGRP '7'
        task grp8
          edit ENSGRP '8'
        task grp9
          edit ENSGRP '9'
        task grp10
          edit ENSGRP '10'
        task grp11
          edit ENSGRP '11'
        task grp12
          edit ENSGRP '12'
        task grp13
          edit ENSGRP '13'
        task grp14
          edit ENSGRP '14'
        task grp15
          edit ENSGRP '15'
        task grp16
          edit ENSGRP '16'
      endfamily # /prod2018010200/gdas/enkf/efcs
      task epos
        trigger ./efcs == complete
    endfamily # /prod2018010200/gdas/enkf
    task anal
      trigger ./prep == complete and /prod2018010118/gdas/enkf/epos == complete
    task fcst
      trigger ./anal == complete
    family post # /prod2018010200/gdas/post
      task post_manager
        trigger ../fcst == active or ../fcst == complete
        event 1 release_postanl
        event 2 release_post00
        event 3 release_post01
        event 4 release_post02
        event 5 release_post03
        event 6 release_post04
        event 7 release_post05
      task f000
        edit FHRGRP 'f000'
        edit FHRLST 'anl'
        trigger ./post_manager:release_post00
      task f006
        edit FHRGRP 'f006'
        edit FHRLST 'f006'
        trigger ./post_manager:release_post01
      task f012
        edit FHRGRP 'f012'
        edit FHRLST 'f012'
        trigger ./post_manager:release_post02
      task f018
        edit FHRGRP 'f018'
        edit FHRLST 'f018'
        trigger ./post_manager:release_post03
      task f024
        edit FHRGRP 'f024'
        edit FHRLST 'f024'
        trigger ./post_manager:release_post04
      task f030
        edit FHRGRP 'f030'
        edit FHRLST 'f030'
        trigger ./post_manager:release_post05
    endfamily # /prod2018010200/gdas/post
    task vrfy
      trigger ./post == complete
  endfamily # /prod2018010200/gdas
  family gfs # /prod2018010200/gfs
    edit ECF_JOB_CMD 'lsub %ECF_JOB% %ECF_JOBOUT% xc40-dev'
    edit ECF_FILES '{doc.settings.ECF_HOME}/scripts'
    edit PROJ '%PROJENVIR%'
    edit MODEL_NAME 'gfs'
    task dump_waiter
      event 1 updated_status
    task prep
      trigger /prod2018010118/gdas/post == complete
    task anal
      trigger ./prep == complete and /prod2018010118/gdas/enkf/epos == complete
    task fcst
      trigger ./anal == complete
    family post # /prod2018010200/gfs/post
      task post_manager
        trigger ../fcst == active or ../fcst == complete
        event 1 release_postanl
        event 2 release_post00
        event 3 release_post01
        event 4 release_post02
        event 5 release_post03
        event 6 release_post04
        event 7 release_post05
        event 8 release_post06
        event 9 release_post07
        event 10 release_post08
        event 11 release_post09
        event 12 release_post10
        event 13 release_post11
        event 14 release_post12
        event 15 release_post13
        event 16 release_post14
        event 17 release_post15
        event 18 release_post16
        event 19 release_post17
        event 20 release_post18
        event 21 release_post19
        event 22 release_post20
        event 23 release_post21
        event 24 release_post22
        event 25 release_post23
        event 26 release_post24
        event 27 release_post25
        event 28 release_post26
        event 29 release_post27
        event 30 release_post28
        event 31 release_post29
        event 32 release_post30
        event 33 release_post31
        event 34 release_post32
        event 35 release_post33
        event 36 release_post34
        event 37 release_post35
        event 38 release_post36
        event 39 release_post37
        event 40 release_post38
        event 41 release_post39
        event 42 release_post40
        event 43 release_post41
        event 44 release_post42
        event 45 release_post43
        event 46 release_post44
        event 47 release_post45
        event 48 release_post46
        event 49 release_post47
        event 50 release_post48
        event 51 release_post49
        event 52 release_post50
        event 53 release_post51
        event 54 release_post52
        event 55 release_post53
        event 56 release_post54
        event 57 release_post55
        event 58 release_post56
        event 59 release_post57
        event 60 release_post58
        event 61 release_post59
        event 62 release_post60
        event 63 release_post61
        event 64 release_post62
        event 65 release_post63
        event 66 release_post64
        event 67 release_post65
        event 68 release_post66
        event 69 release_post67
        event 70 release_post68
        event 71 release_post69
        event 72 release_post70
        event 73 release_post71
        event 74 release_post72
        event 75 release_post73
        event 76 release_post74
        event 77 release_post75
        event 78 release_post76
        event 79 release_post77
        event 80 release_post78
        event 81 release_post79
        event 82 release_post80
        event 83 release_post81
        event 84 release_post82
        event 85 release_post83
        event 86 release_post84
        event 87 release_post85
        event 88 release_post86
        event 89 release_post87
        event 90 release_post88
        event 91 release_post89
        event 92 release_post90
        event 93 release_post91
        event 94 release_post92
        event 95 release_post93
        event 96 release_post94
        event 97 release_post95
        event 98 release_post96
        event 99 release_post97
        event 100 release_post98
        event 101 release_post99
        event 102 release_post100
        event 103 release_post101
        event 104 release_post102
        event 105 release_post103
        event 106 release_post104
        event 107 release_post105
        event 108 release_post106
        event 109 release_post107
        event 110 release_post108
        event 111 release_post109
        event 112 release_post110
        event 113 release_post111
        event 114 release_post112
        event 115 release_post113
        event 116 release_post114
        event 117 release_post115
        event 118 release_post116
        event 119 release_post117
        event 120 release_post118
        event 121 release_post119
        event 122 release_post120
        event 123 release_post123
        event 124 release_post126
        event 125 release_post129
        event 126 release_post132
        event 127 release_post135
        event 128 release_post138
        event 129 release_post141
        event 130 release_post144
        event 131 release_post147
        event 132 release_post150
        event 133 release_post153
        event 134 release_post156
        event 135 release_post159
        event 136 release_post162
        event 137 release_post165
        event 138 release_post168
        event 139 release_post171
        event 140 release_post174
        event 141 release_post177
        event 142 release_post180
        event 143 release_post183
        event 144 release_post186
        event 145 release_post189
        event 146 release_post192
        event 147 release_post195
        event 148 release_post198
        event 149 release_post201
        event 150 release_post204
        event 151 release_post207
        event 152 release_post210
        event 153 release_post213
        event 154 release_post216
        event 155 release_post219
        event 156 release_post222
        event 157 release_post225
        event 158 release_post228
        event 159 release_post231
        event 160 release_post234
        event 161 release_post237
        event 162 release_post240
        event 163 release_post252
        event 164 release_post264
        event 165 release_post276
        event 166 release_post288
        event 167 release_post300
        event 168 release_post312
        event 169 release_post324
        event 170 release_post336
        event 171 release_post348
        event 172 release_post360
        event 173 release_post372
        event 174 release_post384
      task grp000
        edit FHRGRP '000'
        edit FHRLST 'anl'
        trigger ./post_manager:release_post00
      task grp001
        edit FHRGRP '001'
        edit FHRLST 'f000'
        trigger ./post_manager:release_post01
      task grp002
        edit FHRGRP '002'
        edit FHRLST 'f006'
        trigger ./post_manager:release_post02
      task grp003
        edit FHRGRP '003'
        edit FHRLST 'f012'
        trigger ./post_manager:release_post03
      task grp004
        edit FHRGRP '004'
        edit FHRLST 'f018'
        trigger ./post_manager:release_post04
      task grp005
        edit FHRGRP '005'
        edit FHRLST 'f024'
        trigger ./post_manager:release_post05
    endfamily # /prod2018010200/gfs/post
    task vrfy
      trigger ./post == complete
  endfamily # /prod2018010200/gfs
  family archive # /prod2018010200/archive
    task gdasarch
      trigger ../gdas/vrfy == complete
    task gfsarch
      trigger ../gfs/vrfy == complete
    family earc # /prod2018010200/archive/earc
      trigger ../gdas/enkf/epos == complete
      task grp1
        edit ENSGRP '1'
      task grp2
        edit ENSGRP '2'
      task grp3
        edit ENSGRP '3'
      task grp4
        edit ENSGRP '4'
      task grp5
        edit ENSGRP '5'
      task grp6
        edit ENSGRP '6'
      task grp7
        edit ENSGRP '7'
      task grp8
        edit ENSGRP '8'
      task grp9
        edit ENSGRP '9'
      task grp10
        edit ENSGRP '10'
      task grp11
        edit ENSGRP '11'
      task grp12
        edit ENSGRP '12'
      task grp13
        edit ENSGRP '13'
      task grp14
        edit ENSGRP '14'
      task grp15
        edit ENSGRP '15'
      task grp16
        edit ENSGRP '16'
    endfamily # /prod2018010200/archive/earc
  endfamily # /prod2018010200/archive
endsuite # /prod2018010200
